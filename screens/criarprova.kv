<CriarProvaScreen>:
    name: "criarprova"

    FloatLayout:

        # Fundo
        Image:
            source: "assets/fundo.jpg"
            allow_stretch: True
            keep_ratio: False
            size_hint: 1, 1

        # LOGO DO PROJETO
        Image:
            source: "assets/logo1.png"
            size_hint: None, None
            size: "180dp", "180dp"
            pos_hint: {"center_x": 0.5, "center_y": 0.93}

        # T√≠tulo
        MDLabel:
            text: "Criamos sua prova em segundos com IA"
            halign: "center"
            font_style: "H6"
            theme_text_color: "Custom"
            text_color: 0, 0, 0, 1
            pos_hint: {"center_y": 0.83}

        # Subt√≠tulo (vazio por enquanto)
        MDLabel:
            text: ""
            halign: "center"
            font_style: "H5"
            theme_text_color: "Custom"
            text_color: 0, 0, 0, 1
            pos_hint: {"center_y": 0.77}

        # Bot√µes Importar PDF e JPG
        BoxLayout:
            size_hint: 0.86, None
            height: "46dp"
            pos_hint: {"center_x": 0.5, "center_y": 0.69}
            spacing: "10dp"

            MDRaisedButton:
                text: "üìÑ Importar PDF"
                md_bg_color: 0.15, 0.15, 0.15, 1
                text_color: 1, 1, 1, 1
                on_release: root.abrir_popup_pdf()

            MDRaisedButton:
                text: "‚≠ê Importar JPG"
                md_bg_color: 0.15, 0.15, 0.15, 1
                text_color: 1, 1, 1, 1
                on_release: root.importar_jpg()

        # ===== √ÅREA GRANDE DE TEXTO COM ROLAGEM =====
        MDCard:
            size_hint: 0.86, None
            height: "360dp"                  # << aumentei bastante
            pos_hint: {"center_x": 0.5, "center_y": 0.50}
            padding: "10dp"
            radius: [16, 16, 16, 16]
            orientation: "vertical"

            ScrollView:
                size_hint: 1, 1
                do_scroll_x: False
                bar_width: "4dp"

                # Para texto longo, TextInput √© mais est√°vel que MDTextField
                TextInput:
                    id: campo_texto_prova
                    text: ""
                    multiline: True
                    write_tab: False
                    size_hint_x: 1
                    size_hint_y: None
                    height: max(self.minimum_height, dp(340))   # mant√©m a √°rea grande
                    on_text: self.height = max(self.minimum_height, dp(340))
                    padding: [10, 10, 10, 10]
                    foreground_color: 0, 0, 0, 1
                    cursor_color: 0, 0, 0, 1
                    background_normal: ''
                    background_active: ''
                    background_color: 1, 1, 1, 1
                    # se sua vers√£o do Kivy suportar hint_text no TextInput, pode manter:
                    # hint_text: "Digite o texto da prova"

        # Tipo de prova e n¬∫ de quest√µes
        BoxLayout:
            size_hint: 0.86, None
            height: "55dp"
            pos_hint: {"center_x": 0.5, "center_y": 0.26}   # << desci um pouco
            spacing: "30dp"

            BoxLayout:
                orientation: "vertical"
                MDLabel:
                    text: "Tipo de prova"
                    halign: "center"
                Spinner:
                    text: "M√∫ltipla escolha"
                    values: ["M√∫ltipla escolha", "Dissertativa"]

            BoxLayout:
                orientation: "vertical"
                MDLabel:
                    text: "N¬∫ de quest√µes"
                    halign: "center"
                Spinner:
                    text: "10"
                    values: ["10", "20", "30", "40"]

        # Bot√£o Gerar Prova
        MDRaisedButton:
            text: "GERAR PROVA"
            md_bg_color: 0.1, 0.4, 0.8, 1
            text_color: 1, 1, 1, 1
            size_hint: 0.5, None
            height: "45dp"
            pos_hint: {"center_x": 0.5, "center_y": 0.16}
            on_release: root.abrir_loading()

        # Voltar
        MDFlatButton:
            text: "Voltar"
            text_color: 0, 0, 0, 1
            pos_hint: {"center_x": 0.5, "center_y": 0.09}
            on_release: app.root.current = "login"
